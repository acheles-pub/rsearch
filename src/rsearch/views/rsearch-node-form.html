<div np-rsearch-node-history-info></div>
<div np-rsearch-node-info></div>

<div class="relations">
    <div ng-if="node._type === 'COMPANY'">
        <ul class="unstyled">
            <li ng-show="node._info.in['FOUNDER_COMPANY']"><a class="action" ng-click="relationsClick('parents', 'FOUNDER_COMPANY')"><ng-pluralize count="count = node._info.in['FOUNDER_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_FOUNDER_COMPANY")}"></ng-pluralize></a></li>
            <li ng-show="node._info.in['FOUNDER_INDIVIDUAL']"><a class="action" ng-click="relationsClick('parents', 'FOUNDER_INDIVIDUAL')"><ng-pluralize count="count = node._info.in['FOUNDER_INDIVIDUAL']" when="${_tr("NG_PLURALIZE::RELATION_FOUNDER_INDIVIDUAL")}"></ng-pluralize></a></li>
            <li ng-show="node._info.out['FOUNDER_COMPANY']"><a class="action" ng-click="relationsClick('children', 'FOUNDER_COMPANY')"><ng-pluralize count="count = node._info.out['FOUNDER_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_SUBSIDIARY_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.out['HEAD_COMPANY']"><a class="action" ng-click="relationsClick('children', 'HEAD_COMPANY')"><ng-pluralize count="count = node._info.out['HEAD_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_BRANCH_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['PREDECESSOR_COMPANY']"><a class="action" ng-click="relationsClick('parents', 'PREDECESSOR_COMPANY')"><ng-pluralize count="count = node._info.in['PREDECESSOR_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_PREDECESSOR_COMPANY")}"></ng-pluralize></a></li>
            <li ng-show="node._info.out['PREDECESSOR_COMPANY']"><a class="action" ng-click="relationsClick('children', 'PREDECESSOR_COMPANY')"><ng-pluralize count="count = node._info.out['PREDECESSOR_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_SUCCESSOR_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['REGISTER_HOLDER']"><a class="action" ng-click="relationsClick('parents', 'REGISTER_HOLDER')"><ng-pluralize count="count = node._info.in['REGISTER_HOLDER']" when="${_tr("NG_PLURALIZE::RELATION_REGISTER_HOLDER_COMPANY")}"></ng-pluralize></a></li>
            <li ng-show="node._info.out['REGISTER_HOLDER']"><a class="action" ng-click="relationsClick('children', 'REGISTER_HOLDER')"><ng-pluralize count="count = node._info.out['REGISTER_HOLDER']" when="${_tr("NG_PLURALIZE::RELATION_REGISTERED_HOLDER_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['EXECUTIVE_COMPANY']"><a class="action" ng-click="relationsClick('parents', 'EXECUTIVE_COMPANY')"><ng-pluralize count="count = node._info.in['EXECUTIVE_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_EXECUTIVE_COMPANY")}"></ng-pluralize></a></li>
            <li ng-show="node._info.out['EXECUTIVE_COMPANY']"><a class="action" ng-click="relationsClick('children', 'EXECUTIVE_COMPANY')"><ng-pluralize count="count = node._info.out['EXECUTIVE_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_LEAD_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['HEAD_COMPANY']"><a class="action" ng-click="relationsClick('parents', 'HEAD_COMPANY')"><ng-pluralize count="count = node._info.in['HEAD_COMPANY']" when="${_tr("NG_PLURALIZE::RELATION_HEAD_COMPANY")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['EXECUTIVE_INDIVIDUAL']"><a class="action" ng-click="relationsClick('parents', 'EXECUTIVE_INDIVIDUAL')"><ng-pluralize count="count = node._info.in['EXECUTIVE_INDIVIDUAL']" when="${_tr("NG_PLURALIZE::RELATION_EXECUTIVE_INDIVIDUAL")}"></ng-pluralize></a></li>

            <li ng-show="node._info.in['ADDRESS']"><a class="action" ng-click="relationsClick('parents', 'ADDRESS')"><ng-pluralize count="count = node._info.in['ADDRESS']" when="${_tr("NG_PLURALIZE::RELATION_ADDRESS")}"></ng-pluralize></a></li>
            <li ng-show="node._info.in['PHONE']"><a class="action" ng-click="relationsClick('parents', 'PHONE')"><ng-pluralize count="count = node._info.in['PHONE']" when="${_tr("NG_PLURALIZE::RELATION_PHONE")}"></ng-pluralize></a></li>
        </ul>
    </div>

    <div ng-if="node._type === 'INDIVIDUAL'">
        <ul class="unstyled">
            <li ng-show="node._info.out['FOUNDER_INDIVIDUAL']"><a class="action" ng-click="relationsClick('children', 'FOUNDER_INDIVIDUAL')"><ng-pluralize count="count = node._info.out['FOUNDER_INDIVIDUAL']" when="${_tr("NG_PLURALIZE::RELATION_SUBSIDIARY_COMPANY")}"></ng-pluralize></a></li>
            <li ng-show="node._info.out['EXECUTIVE_INDIVIDUAL']"><a class="action" ng-click="relationsClick('children', 'EXECUTIVE_INDIVIDUAL')"><ng-pluralize count="count = node._info.out['EXECUTIVE_INDIVIDUAL']" when="${_tr("NG_PLURALIZE::RELATION_LEAD_COMPANY")}"></ng-pluralize></a></li>
        </ul>
    </div>

    <div ng-if="node._type === 'ADDRESS'">
        <ul class="unstyled">
            <li ng-show="node._info.out['ADDRESS']"><a class="action" ng-click="relationsClick('children', 'ADDRESS')"><ng-pluralize count="count = node._info.out['ADDRESS']" when="${_tr("NG_PLURALIZE::RELATION_COMPANY")}"></ng-pluralize></a></li>
        </ul>
    </div>

    <div ng-if="node._type === 'PHONE'">
        <ul class="unstyled">
            <li ng-show="node._info.out['PHONE']"><a class="action" ng-click="relationsClick('children', 'PHONE')"><ng-pluralize count="count = node._info.out['PHONE']" when="${_tr("NG_PLURALIZE::RELATION_COMPANY")}"></ng-pluralize></a></li>
        </ul>
    </div>
</div>

<div class="actions">
    <div ng-if="node._type === 'COMPANY'">
        <div class="row">
            <div class="span5">
                <h5 class="actions-label">${_tr("Бизнес-справки онлайн")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_market_profile_short&fromSearch=1&id={{node.bsn_id}}">${_tr("Профиль регистрации")}</a><span class="divider"></span><span class="price">5 ие</span></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_market_list&fromSearch=1&id={{node.bsn_id}}">${_tr("Корпоративная структура")}</a><span class="divider"></span><span class="price">доступно 7</span></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_business_profile&fromSearch=1&id={{node.bsn_id}}">${_tr("Бизнес профиль")}</a></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_market_profile_full&fromSearch=1&id={{node.bsn_id}}">${_tr("Аналитический профиль")}</a></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_credit_profile&fromSearch=1&id={{node.bsn_id}}">${_tr("Кредитный профиль")}</a></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/reports/?code=rep_history_profile&fromSearch=1&id={{node.bsn_id}}">${_tr("Исторический профиль")}</a></li>
                </ul>

                <h5 class="actions-label">${_tr("Система графического анализа")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/nkbrelation/report?node.type=COMPANY&bsn_id.equals={{node.bsn_id}}">${_tr("Построить схему")}</a></li>
                </ul>
            </div>
            <div class="span4">
                <h5 class="actions-label">${_tr("Отчеты на заказ")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/search/offlinea/?idcomp={{node.bsn_id}}">${_tr("Расширенное исследование")}</a></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/search/offlinea/?idcomp={{node.bsn_id}}">${_tr("Схема аффилированных лиц")}</a></li>
                </ul>

                <h5 class="actions-label">${_tr("ЕГРЮЛ")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/search/offlinee/?idcomp={{node.bsn_id}}">${_tr("Заказать выписку ЕГРЮЛ")}</a></li>
                    <li ng-repeat="egrul in node.__egrulList"><a class="action" ng-href="{{egrul._link}}" download="{{egrul._downloadName}}" target="_self">${_tr("Скачать выписку")}</a> ${_trc("от", "от такой-то даты")} {{egrul.fileDate | date:'mediumDate'}}</li>
                </ul>
            </div>
        </div>
    </div>

    <div ng-if="node._type === 'INDIVIDUAL'">
        <div class="row">
            <div class="span5">
                <h5 class="actions-label">${_tr("Система графического анализа")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/nkbrelation/report?node.type=INDIVIDUAL&id.equals={{node.id}}">${_tr("Построить схему")}</a></li>
                </ul>
            </div>
            <div class="span4">
                <h5 class="actions-label">${_tr("ЕГРЮЛ")}</h5>
                <ul class="unstyled actions-list">
                    <li><a class="action" target="_blank" href="http://testing.nkb/search/offlinee/">${_tr("Заказать выписку ЕГРЮЛ")}</a></li>
                    <li><a class="action" target="_blank" href="http://testing.nkb/search/offlinep/">${_tr("Заказать выписку ЕГРИП")}</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--
    <div ng-if="node._type === 'ADDRESS'">
    </div>

    <div ng-if="node._type === 'PHONE'">
    </div>
    -->
</div>
